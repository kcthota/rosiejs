/*
Copyright 2012 Krishna Chaitanya Thota (kcthota@gmail.com)

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
var Rosie=Rosie||{};Rosie.prefix="kc_";Rosie.UI=Rosie.UI||{};Rosie.UI.Component=Backbone.View.extend({attributes:{},cls:null,initialize:function(a){var b=this;_.extend(b,a);if(!b.id){b.id=_.uniqueId(Rosie.prefix)}this.render()},getDOM:function(){return this.$el.html()},addClass:function(a,b){if(a){var c=this.$el;if(b){c=b}c.addClass(a)}}});Rosie.UI.Button=Rosie.UI.Component.extend({disabled:false,block:false,btnStyle:null,scale:null,loadingText:null,toggleButton:false,type:"button",toggleControlType:"button",tpl:'<button type="{{type}}" id="{{id}}" class="btn{{#if block}} btn-block{{/if}}{{#if disabled}} disabled{{/if}}{{#if btnStyle}} btn-{{btnStyle}}{{/if}}{{#if scale}} btn-{{scale}}{{/if}}" {{#if loadingText}}data-loading-text="{{loadingText}}"{{/if}}{{#if toggleButton}} data-toggle="{{toggleControlType}}"{{/if}}>{{text}}{{{ShowCaret toggleControlType}}}</button>',initialize:function(a){this.constructor.__super__.initialize.apply(this,[a])},_resolveTpl:function(){var a=this;Handlebars.registerHelper("ShowCaret",function(b){if(b==="dropdown"){return'<b class="caret"></b>'}else{return""}});return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b},toggle:function(){this.$el.button("toggle")},setLoading:function(){this.$el.button("loading")},reset:function(){this.$el.button("reset")},setText:function(b){var a=this;a.text=b;a.$el.text(b)},disable:function(){var b=this,a=$("#"+b.id);if(!a.hasClass("disabled")){a.addClass("disabled");b.disabled=!b.disabled;b.$el.trigger("disabled")}},enable:function(){var b=this,a=$("#"+b.id);if(a.hasClass("disabled")){a.toggleClass("disabled");b.disabled=!b.disabled;b.$el.trigger("enabled")}}});Rosie.UI.ButtonGroup=Rosie.UI.Component.extend({toggleStyle:null,buttons:[],menu:null,verticalAlign:false,tpl:'<div class="btn-group{{#if verticalAlign}} btn-group-vertical{{/if}}" id="{{id}}"{{#if toggleStyle}} data-toggle="buttons-{{toggleStyle}}"{{/if}}></div>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);_.each(b.buttons,function(c){c.$el.appendTo(b.el)});if(b.menu){b.menu.$el.appendTo(b.el)}if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b},getSelected:function(){var a=this;return $("#"+a.id+" > button.active")}});Rosie.UI.Image=Rosie.UI.Component.extend({tagName:"img",render:function(){var b=this,a=b.make(b.tagName,b.attributes);b.el=a;b.setElement(b.el);if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});Rosie.UI.IconSprite=Rosie.UI.Component.extend({tagName:"i",render:function(){var b=this,a=b.make(b.tagName,b.attributes);b.el=a;b.setElement(b.el);if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});Rosie.UI.Input=Rosie.UI.Component.extend({type:"text",placeholder:null,inputAttributes:{},prepend:null,append:null,inputCls:null,disabled:false,tpl:'<div id="{{id}}" class="{{#if prepend}} input-prepend{{/if}}{{#if append}} input-append{{/if}}">{{#if label}}<label id="{{id}}-lbl">{{label}}</label>{{/if}}<input type="{{type}}" id="{{id}}-text"{{#if placeholder}} placeholder="{{placeholder}}"{{/if}} {{#if disabled}}disabled{{/if}}></div>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var c=this,a=this._resolveTpl();c.el=a;c.setElement(c.el);c.$el.attr(c.attributes);c.addClass(c.cls);var b=c.$el.children("input#"+c.id+"-text");b.attr(c.inputAttributes);c.addClass(c.inputCls,b);c._addPrependersAppenders(b);if(c.renderTo){$(c.renderTo).append(c.el);c.$el.trigger("rendered")}return c},_addPrependersAppenders:function(a){var b=this;if(b.prepend){_.each(b.prepend,function(c){c.$el.insertBefore(a)})}if(b.append){_.each(b.append,function(c){c.$el.insertAfter(a)})}},getInputField:function(){return this.$el.children("input#"+me.id+"-text")}});Rosie.UI.Radio=Rosie.UI.Component.extend({label:"",inputAttributes:{},checked:false,inline:false,tpl:'<label id="{{id}}" class="radio {{#if inline}}inline{{/if}}"><input type="radio" name="{{name}}" id="{{id}}-input" value="{{value}}"{{#if checked}} checked="checked"{{/if}}>{{#if label}}{{label}}{{/if}}</label>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);b.$el.children("input#"+b.id+"-input").attr(b.inputAttributes);b.addClass(b.inputCls,b.$el.children("input#"+b.id+"-input"));if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b},getInputField:function(){return this.$el.children("input#"+me.id+"-input")}});Rosie.UI.CheckBox=Rosie.UI.Component.extend({label:"",inputAttributes:{},checked:false,inline:false,inputCls:null,tpl:'<label id="{{id}}" class="checkbox {{#if inline}}inline{{/if}}"><input type="checkbox" name="{{name}}" id="{{id}}-input" value="{{value}}"{{#if checked}} checked="checked"{{/if}}>{{#if label}}{{label}}{{/if}}</label>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);b.$el.children("input#"+b.id+"-input").attr(b.inputAttributes);b.addClass(b.inputCls,b.$el.children("input#"+b.id+"-input"));if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b},getInputField:function(){return this.$el.children("input#"+me.id+"-input")}});Rosie.UI.TextArea=Rosie.UI.Component.extend({tagName:"textarea",text:"",render:function(){var b=this,a=b.make(b.tagName,b.attributes,b.text);b.el=a;b.setElement(b.el);if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b},getText:function(){return this.$el.val()},setText:function(a){if(a){this.$el.val(a)}}});Rosie.UI.TextAddon=Rosie.UI.Component.extend({tagName:"span",text:"",render:function(){var b=this,a=b.make(b.tagName,{"class":"add-on"},b.text);b.el=a;b.setElement(b.el);return b}});Rosie.UI.MenuItem=Rosie.UI.Component.extend({text:"",isDivider:false,linkAttributes:{},linkCls:null,menu:null,tpl:'{{#if isDivider}}<li class="divider"></li>{{else}}<li id="{{id}}"{{#if menu}} class="dropdown-submenu"{{/if}}><a id="{{id}}-item" href="#">{{text}}</a></li>{{/if}}',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);b.$el.children("a#"+b.id+"-item").attr(b.linkAttributes);b.addClass(b.linkCls,b.$el.children("a#"+b.id+"-item"));if(b.menu){b.menu.$el.insertAfter(b.$el.children("a#"+b.id+"-item"))}return b}});Rosie.UI.Menu=Rosie.UI.Component.extend({type:"menu",menuitems:[],tpl:'<ul class="dropdown-menu"></ul>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);_.each(b.menuitems,function(c){c.$el.appendTo(b.el)});if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});Rosie.UI.Container=Rosie.UI.Component.extend({tagName:"div",items:[],text:"",render:function(){var b=this,a=b.make(b.tagName,b.attributes,b.text);b.el=a;b.setElement(b.el);b.addClass(b.cls);_.each(b.items,function(c){c.$el.appendTo(b.el)});if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});Rosie.UI.ComboBox=Rosie.UI.Component.extend({multiple:false,options:[],tpl:'<select id="{{id}}" {{#if multiple}}multiple="multiple"{{/if}}>{{#each options}}<option{{#if value}} value="{{value}}"{{/if}}{{#if select}} selected{{/if}}>{{txt}}</option>{{/each}}</select>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});Rosie.UI.NavItem=Rosie.UI.Component.extend({menu:null,header:false,isDivider:false,title:"",tpl:'{{#if isDivider}}<li class="divider"></li>{{else}}{{#if header}}<li id="{{id}}" class="nav-header">{{title}}</li>{{else}}<li id="{{id}}"{{#if menu}} class="dropdown"{{/if}}><a{{#if menu}} class="dropdown-toggle" data-toggle="dropdown"{{/if}} href="{{#if href}}{{href}}{{else}}#{{/if}}">{{title}}{{#if menu}} <b class="caret"></b>{{/if}}</a></li>{{/if}}{{/if}}',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);if(b.menu){b.menu.$el.appendTo(b.el)}return b}});Rosie.UI.Nav=Rosie.UI.Component.extend({type:"tabs",items:null,stacked:false,tpl:'<ul id="{{id}}" class="nav nav-{{type}} {{#if stacked}}nav-stacked{{/if}}"></ul>',_resolveTpl:function(){var a=this;return(Handlebars.compile(a.tpl))(a)},render:function(){var b=this,a=this._resolveTpl();b.el=a;b.setElement(b.el);b.$el.attr(b.attributes);b.addClass(b.cls);_.each(b.items,function(c){c.$el.appendTo(b.el)});if(b.renderTo){$(b.renderTo).append(b.el);b.$el.trigger("rendered")}return b}});